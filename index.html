<html>
  <script>
    //alert("hi")

    const sha256 = async (input) => {
	const textAsBuffer = new TextEncoder().encode(input);
	const hashBuffer = await window.crypto.subtle.digest("SHA-256", textAsBuffer);
	const hashArray = Array.from(new Uint8Array(hashBuffer));
	const hash = hashArray
	      .map((item) => item.toString(16).padStart(2, "0"))
	      .join("");
	return hash;
    };

    async function xsha256(data) {
    }
    async function publish() {
	hashes = [ ]

	input = document.getElementById("data")
	if (input.value.length > 0) {
	    hash = await sha256(input.value)
	    hashes.push(hash)
	}

	uploads = document.getElementById('upload')
	for (u of uploads.files) {
	    console.log(u)
	    hash = await sha256(u.text)
	    hashes.push(hash)
	}

	magnets = [ ]
	for (h of hashes) {
	    magnets.push("magnet:?xt=urn:sha256:"+h)
	}

	console.log(hashes)
	alert('Your results have been evaluated and accepted for publication!\n\
\n\
Publication ids:\n'
	      + hashes//+'\n\
//\n\
//Permanent access URLs:\n'
//	     + magnets
	     )
    }

  </script>
    <title>Journal of Konfidentiality Exceptions (JOKE)</title>
  <body>
    <h1>Journal of Konfidentiality Exceptions (JOKE)</h1>
    JOKE is a new style of journal designed to reduce bureaucracy via
    direct action.


    <h2>Purpose</h2>

    JOKE publishes results in all fields of art and science which are
    hindered by internal data security rules.  Primarily, submissions
    are of data which organizational rules require to be classified
    "confidential" (limiting the use of common scientific tools), but
    there is no reason for it to be confidential.  Publication in JOKE
    will allow the data to be classified "public", so that it can be
    used in online services such as ChatGPT or Github, and sharing
    with collaborators.


    <h2>Publication conditions</h2>

    Don't publish anything that is can not be made public.  Data is
    not transferred out of your web browser anyway.


    <h2>Submission</h2>

    <input type="file" id="upload" multiple /><br>
    Or enter free-from text:<br>
    <textarea id="data" name="data" rows="10" cols="120"></textarea>
    <br>
    <input type="submit" onclick="publish()" value="Submit">
  </body>


  <h2>Background</h2>

  Some university rules state that all research data is
  "confidential", which basically means that standard research can't
  be done.  Published data can be "public" (but note that journals
  aren't evaluated for IT security, so how are we supposed to send
  them the unpublished data for peer review?, since it's still
  confidential until publication is done).  JOKE provides a way to
  publish any data, without actually sharing it, so that researchers
  may apply a more appropriate security classification and do their
  research.

  If you don't get this JOKE, that just shows how IT Security's main
  audience is auditors, not their community.


  <h2>How it works / to do</h2>

  JOKE uses Javascript to compute a sha256 hash of the uploaded
  text/data.  There is no transfer out of the web browser, and no
  outside resources loaded.  Future plans:

  <ul>
    <li>Preparation of security evaluation, target submission data 1
    April 2024.</li>
  </ul>

</html>
